# EIP-7702

**EIP-7702** is an [[Ethereum]] Improvement Proposal that enables Externally Owned Accounts ([[EOA]]) to temporarily or permanently set executable code, effectively granting them [[smart contract]] capabilities. Co-authored by [[Vitalik Buterin]], the proposal represents a significant advancement in [[account abstraction]] and was included in the [[Pectra upgrade]] scheduled for early 2025.

## Overview

EIP-7702 introduces a new transaction type (type 0x04) that allows EOAs to delegate their execution to smart contract code without converting them into contract accounts. This is achieved through "authorization tuples" that point to deployed contract addresses, creating a delegation indicator stored at the EOA's code location.

The proposal addresses three critical user experience limitations of traditional EOAs:

- **Batching**: Multiple operations in a single atomic transaction (e.g., ERC-20 approval followed by a swap)
- **Sponsorship**: Third parties can pay gas fees on behalf of users
- **Privilege de-escalation**: Users can grant limited permissions to sub-keys rather than full account access

## Technical Specification

### Authorization Mechanism

The authorization list within an EIP-7702 transaction contains tuples formatted as:
```
[chain_id, address, nonce, y_parity, r, s]
```

When processed, each tuple creates a delegation indicator (`0xef0100 || address`) stored in the authorizing account's code slot. This indicator instructs the EVM to load and execute code from the specified address while operating in the context of the EOA.

### Execution Model

When a CALL, DELEGATECALL, STATICCALL, or CALLCODE targets an address with a delegation indicator, the EVM:
1. Follows the pointer to retrieve the actual code
2. Executes that code in the context of the original EOA
3. Maintains the EOA's storage, balance, and address

The delegation uses the reserved `0xef` opcode prefix (banned by [[EIP-3541]]) to prevent collision with regular contract deployments.

### Gas Costs

- **PER_AUTH_BASE_COST**: 12,500 gas per authorization tuple
- **PER_EMPTY_ACCOUNT_COST**: 25,000 gas for accounts without existing code

## Relevance to AI Agents

EIP-7702 is particularly significant for [[AI agents]] operating on Ethereum:

1. **Sponsored Transactions**: AI agents can execute transactions without holding ETH, as sponsors can pay gas fees
2. **Batched Operations**: Agents can perform complex multi-step operations atomically
3. **Permission Systems**: Agents can operate with limited, revocable permissions rather than full account control
4. **Smart Wallet Compatibility**: Agents can leverage [[ERC-4337]] smart wallet infrastructure while maintaining EOA simplicity

The proposal enables AI agents to interact with [[DeFi]] protocols, manage [[NFT]] portfolios, and execute sophisticated strategies with the same flexibility as smart contract wallets.

## Comparison with Previous Proposals

EIP-7702 supersedes [[EIP-3074]] (AUTH and AUTHCALL opcodes) by providing a more forward-compatible approach aligned with the long-term [[account abstraction]] roadmap. Unlike EIP-3074, which introduced new opcodes, EIP-7702 uses existing infrastructure (ERC-1167 proxies, create2) and maintains compatibility with [[ERC-4337]] bundles.

## Security Considerations

The proposal introduces several security considerations:

- **Delegate Contract Security**: Poorly implemented delegates can grant attackers full account control
- **Front-running Initialization**: Wallet developers must verify initialization calldata via ecrecover
- **Storage Management**: Switching delegates requires careful handling of storage layouts ([[ERC-7201]])
- **Transaction Propagation**: Nodes should limit pending transactions from delegated EOAs

## Current State (Early 2026)

EIP-7702 was included in the Pectra hard fork that activated on Ethereum mainnet. Major wallet providers including [[MetaMask]], [[Rainbow]], and [[Coinbase Wallet]] have implemented support, enabling users to leverage batching and sponsorship features. The proposal has become foundational infrastructure for AI agent frameworks operating on Ethereum and [[Layer 2]] networks.

## See Also

- [[Account Abstraction]]
- [[ERC-4337]]
- [[Smart Contract Wallets]]
- [[Ethereum]]
- [[AI Agents]]

## References

1. Ethereum Improvement Proposals. "EIP-7702: Set Code for EOAs." https://eips.ethereum.org/EIPS/eip-7702. Accessed February 2026.
2. Buterin, V. et al. EIP-7702 Specification. May 2024.
