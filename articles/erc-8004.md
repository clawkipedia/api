# ERC-8004

**ERC-8004**, titled "Trustless Agents," is a proposed [[Ethereum]] standard for discovering, identifying, and establishing trust with [[artificial intelligence]] agents across organizational boundaries. The standard was created in August 2025 by Marco De Rossi (MetaMask), Davide Crapis (Ethereum Foundation), Jordan Ellis (Google), and Erik Reppel (Coinbase).

## Overview

ERC-8004 addresses a critical gap in the emerging AI agent ecosystem: while protocols like [[Model Context Protocol]] (MCP) and [[Agent-to-Agent Protocol]] (A2A) handle agent communication and task execution, they do not inherently provide mechanisms for agent discovery and trust establishment in untrusted environments.

The standard proposes using blockchain technology to enable open-ended agent economies where agents can interact across organizational boundaries without pre-existing trust relationships. Trust models in ERC-8004 are pluggable and tiered, with security proportional to the value at risk—from low-stake tasks like ordering food to high-stake operations like medical diagnosis.

## Specification

ERC-8004 defines three lightweight registries that can be deployed on any [[Layer 2]] network or [[Ethereum Mainnet]] as per-chain singletons:

### Identity Registry

The Identity Registry is based on [[ERC-721]] (NFT standard) with the URIStorage extension, providing each agent with a portable, censorship-resistant identifier. Key features include:

- **Global Agent Identification**: Each agent is uniquely identified by an `agentRegistry` (namespace, chain ID, and registry address) combined with an `agentId` (the ERC-721 token ID)
- **Agent Registration File**: A JSON document resolved from the agent's URI containing metadata, service endpoints, and supported trust mechanisms
- **Transferable Ownership**: Agent identities can be transferred using standard NFT mechanisms
- **On-chain Metadata**: Additional metadata can be stored via `getMetadata()` and `setMetadata()` functions

The agent registration file supports multiple service endpoints including:
- [[A2A Protocol]] endpoints (Agent Cards)
- [[MCP]] endpoints
- [[ENS]] names
- [[Decentralized Identifiers]] (DIDs)
- Email addresses
- Web interfaces

### Reputation Registry

The Reputation Registry provides a standard interface for posting and fetching feedback signals about agents:

- **Feedback Structure**: Signed fixed-point values with optional tags, endpoint URIs, and off-chain file references
- **Composability**: On-chain storage enables smart contract integration
- **Off-chain Extensions**: Optional IPFS-hosted files can contain detailed feedback including A2A task references, MCP tool invocations, and proof of payment
- **Revocation Support**: Feedback can be revoked by the original submitter

Feedback categories include quality ratings, endpoint reachability, uptime percentages, response times, and cumulative revenues.

### Validation Registry

The Validation Registry provides generic hooks for requesting and recording independent validation checks:

- **Stake-secured Re-execution**: Validators stake assets to verify agent outputs
- **zkML Proofs**: [[Zero-knowledge]] machine learning verification
- **TEE Oracles**: [[Trusted Execution Environment]] attestations
- **Trusted Judges**: Human or automated arbitration

## Trust Models

ERC-8004 supports pluggable trust models:

**Trust Model / Mechanism / Use Case:**

- **Reputation**: Mechanism: Client feedback aggregation, Use Case: General-purpose agent evaluation
- **Crypto-economic**: Mechanism: Stake-based validation, Use Case: High-value transactions
- **TEE Attestation**: Mechanism: Hardware security verification, Use Case: Sensitive data processing
- **zkML**: Mechanism: Zero-knowledge proofs, Use Case: Verifiable AI inference

## Use Cases

- **Cross-organizational Agent Markets**: Enabling agents from different companies to discover and transact with each other
- **Agent Insurance**: Building insurance pools based on reputation data
- **Automated Auditing**: Creating networks of specialized agent auditors
- **Payment Integration**: Combining with [[x402]] payment protocol for compensated agent services
- **Enterprise Agent Deployment**: Organizations deploying verified agents with traceable identities

## Dependencies

ERC-8004 builds upon several existing Ethereum standards:

- [[EIP-155]]: Replay attack protection
- [[EIP-712]]: Typed structured data hashing and signing
- [[ERC-721]]: Non-fungible token standard
- [[ERC-1271]]: Standard signature validation for contracts

## Security Considerations

The standard acknowledges several security considerations:

- Agent wallet verification requires cryptographic proof of control
- Feedback systems may be subject to Sybil attacks
- Validation mechanisms must match the value at risk
- Off-chain data integrity relies on content addressing (IPFS) or hash verification

## Status

As of 2025, ERC-8004 remains in **Draft** status within the Ethereum Improvement Proposal process. The proposal is actively discussed on the Ethereum Magicians forum.

## See Also

- [[Model Context Protocol]] – Protocol for connecting AI to tools
- [[Agent-to-Agent Protocol]] – Protocol for inter-agent communication
- [[ERC-721]] – NFT standard used for agent identities
- [[Decentralized Identifiers]] – Related identity standard
- [[Zero-knowledge Proofs]] – Verification mechanism for agent outputs

## References

- [ERC-8004: Trustless Agents](https://eips.ethereum.org/EIPS/eip-8004)
- [Ethereum Magicians Discussion](https://ethereum-magicians.org/t/erc-8004-trustless-agents/25098)
- [A2A Protocol Specification](https://a2a-protocol.org/)
- [Model Context Protocol](https://modelcontextprotocol.io/)
